"use strict";class Workout{type;date=new Date;id=Date.now()+"".slice(-10);constructor(t,e){this.coords=t,this.distance=e}_setDescription(){this.description=`${"running"===this.type?"🏃‍♂️":"🚴‍♀️"}${this.type[0].toUpperCase()}${this.type.slice(1)} on ${["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]} ${this.date.getDate()}`}}class Running extends Workout{type="running";constructor(t,e){super(t,e),this._setDescription()}calcPace(){this.pace=this.duration/this.distance}}class Cycling extends Workout{type="cycling";constructor(t,e,s){super(t,e),this.elevationGain=s,this._setDescription()}calcSpeed(){return this.speed=this.distance/(this.duration/60),this.speed}}const form=document.querySelector(".form"),containerWorkouts=document.querySelector(".workouts"),inputType=document.querySelector(".form__input--type"),workoutList=document.querySelector(".workoutList"),sidebar=document.querySelector(".sidebar"),full_arrow_1=document.querySelector(".full_arrow_1"),full_arrow_2=document.querySelector(".full_arrow_2"),popup_message=document.querySelector(".popup_message");class App{#t;#e=13;#s;#o=[];#r;#a;#i;constructor(){navigator.geolocation.getCurrentPosition(this._getCurrentLocation.bind(this),(t=>console.error(t.message))),this._getPosition(),form.addEventListener("submit",this._newWorkout.bind(this)),containerWorkouts.addEventListener("click",this._moveMap.bind(this)),full_arrow_2.addEventListener("click",this._fullScreen.bind(this)),full_arrow_1.addEventListener("click",this._mapFullScreen)}_getCurrentLocation(t){const{latitude:e,longitude:s}=t.coords;this.#a={lat:e,lng:s}}_getPosition(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),(t=>console.error(t.message)))}_loadMap(t){const{latitude:e,longitude:s}=t.coords,o=[e,s];this.#t=L.map("map").setView(o,13),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.#t),this._getMarker(this.#r),this.#t.on("click",this._showForm.bind(this))}_makeSidebarFull(){full_arrow_2.innerHTML="",full_arrow_2.innerHTML='<svg class="close" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="white" viewBox="0 0 256 256"><path d="M210.83,50.83,153.66,108H192a4,4,0,0,1,0,8H144a4,4,0,0,1-4-4V64a4,4,0,0,1,8,0v38.34l57.17-57.17a4,4,0,1,1,5.66,5.66ZM112,140H64a4,4,0,0,0,0,8h38.34L45.17,205.17a4,4,0,0,0,5.66,5.66L108,153.66V192a4,4,0,0,0,8,0V144A4,4,0,0,0,112,140Z"></path></svg>',sidebar.style.height="90%"}_makeSidebarSmall(){full_arrow_2.innerHTML="",full_arrow_2.innerHTML='<svg class="open" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="white" viewBox="0 0 256 256"><path d="M212,48V96a4,4,0,0,1-8,0V57.66l-57.17,57.17a4,4,0,0,1-5.66-5.66L198.34,52H160a4,4,0,0,1,0-8h48A4,4,0,0,1,212,48ZM109.17,141.17,52,198.34V160a4,4,0,0,0-8,0v48a4,4,0,0,0,4,4H96a4,4,0,0,0,0-8H57.66l57.17-57.17a4,4,0,0,0-5.66-5.66Z"></path></svg>',sidebar.style.height="35%"}_fullScreen(t){console.log(t),"open"==t.target.classList?this._makeSidebarFull():this._makeSidebarSmall()}_mapFullScreen(t){"open"==t.target.classList?(sidebar.style.height="8%",t.target.classList.remove("open"),t.target.classList.add("close")):"close"==t.target.classList&&(sidebar.style.height="35%",t.target.classList.remove("close"),t.target.classList.add("open"))}_showForm(t){this.#s=t,form.style.display="block",form.classList.remove("hidden"),inputType.focus(),full_arrow_2.style.transform="translateY(0rem)",full_arrow_1.style.transform="translateY(0rem)",screen.width<=500&&(sidebar.style.height="35%")}_hideform(){form.classList.add("hidden")}_moveMap(t){this.#i&&this.#i.remove();const e=t.target.closest(".workout");if(!e)return;const s=this.#o.find((t=>t.id===e.dataset.id)).coords,o={lat:s[0],lng:s[1]};sidebar.style.height="8%",this._createPolyline(this.#a,o),this._adjustMapToPoints(this.#a,o)}_createPolyline(t,e){this.#i=L.polyline([t,e],{color:"red",weight:5,opacity:1,dashArray:"10, 5",lineCap:"butt"}).addTo(this.#t)}_adjustMapToPoints(t,e){const s=L.latLngBounds(t,e);this.#t.fitBounds(s,this.#e)}async _newWorkout(t){let e;t.preventDefault(),sidebar.style.height="35%";const{lat:s,lng:o}=this.#s.latlng,r=inputType.value,a=Math.trunc(this.#t.distance(this.#a,{lat:s,lng:o})/1e3,2);"running"===r&&(e=new Running([s,o],a)),"cycling"===r&&(e=new Cycling([s,o],a)),console.log(e),this.#o.push(e),this._renderWorkoutMarker(e),this._renderWorkout(e),this._hideform(),popup_message.style.transform="translateY(4rem)","running"===e.type?popup_message.style.background="var(--color-brand--2)":popup_message.style.background="var(--color-brand--1)",popup_message.textContent=`${e.type[0].toUpperCase()}${e.type.slice(1)} popup added`,setTimeout((()=>popup_message.style.transform="translateY(-5rem)"),1e3)}_renderWorkout(t){let e=`\n   <li class="workout workout--${t.type}" data-id="${t.id}">\n  <div class="main__div">\n    <div class="workout__details">\n      <span class="workout__value">${t.distance}</span>\n      <span class="workout__unit">km</span>\n    </div>\n    <div class="top__elements">\n      <h2 class="workout__title">${t.description.substring(4)}</h2>\n    </div>\n  </div>\n</li>\n\n`;workoutList.insertAdjacentHTML("beforeend",e)}_renderWorkoutMarker(t,e=100,s=250){L.marker(t.coords).addTo(this.#t).bindPopup(L.popup({maxHeight:e,maxWidth:s,autoClose:!1,closeOnClick:!1,className:`${t.type}-popup`})).setPopupContent(`${t.description}`).openPopup()}_getMarker(t){t&&t.forEach((t=>this._renderWorkoutMarker(t)))}}const app=new App;
//# sourceMappingURL=index.979ed36d.js.map
